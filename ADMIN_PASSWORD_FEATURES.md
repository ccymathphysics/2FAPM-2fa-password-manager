# 管理员密码功能说明

## 功能概述

本版本在原有2FA密码管理器的基础上，增加了管理员密码验证功能，进一步提升数据安全性。

## 新增功能

### 1. 管理员密码设置
- 首次使用时，当数据库为空且未设置管理员密码时，系统会要求设置管理员密码
- 管理员密码使用SHA512算法进行哈希存储
- 密码通过PBKDF2算法派生加密密钥

### 2. 管理员密码验证
- 所有密码操作（添加、编辑、查看）前都需要验证管理员密码
- 管理员密码不保存在内存中，每次操作都需要重新验证
- 验证通过后会初始化加密器用于数据加解密

### 3. 更改管理员密码
- 提供专门的更改管理员密码功能
- 更改密码需要验证原密码和2FA验证码
- 更改密码后会重新加密所有数据

## 安全特性

1. **双重验证**：所有敏感操作都需要管理员密码+2FA双重验证
2. **密码不保存**：管理员密码不会保存在内存中，每次操作都需要重新输入
3. **数据加密**：所有密码数据都使用管理员密码派生的密钥进行加密
4. **盐值保护**：使用随机盐值防止彩虹表攻击

## 使用流程

1. 首次使用时设置管理员密码
2. 使用手机2FA应用扫描二维码进行配对
3. 添加密码时需要输入管理员密码
4. 查看密码时需要输入管理员密码和2FA验证码
5. 编辑密码时需要输入管理员密码和2FA验证码
6. 可随时更改管理员密码（需要验证原密码和2FA）

## 技术实现

- 使用SHA512算法哈希存储管理员密码
- 使用PBKDF2算法派生加密密钥
- 使用Fernet对称加密算法加密密码数据
- 数据库中存储盐值用于密码验证

## 注意事项

1. 请务必记住管理员密码，一旦遗忘将无法恢复数据
2. 更改管理员密码时需要验证原密码和2FA，确保安全性
3. 系统不会在任何地方明文存储管理员密码
